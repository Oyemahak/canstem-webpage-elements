<!-- ============== CanSTEM Search (Courses + Pages + Blogs) ============== -->
<section id="canstem-course-finder" aria-label="Find courses, pages, or blogs">
    <div class="csbx-shell" role="search">
        <!-- Icon -->
        <svg class="csbx-search" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <circle cx="11" cy="11" r="6.5" fill="none" stroke="currentColor" stroke-width="2" />
            <path d="M20 20L16.2 16.2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>

        <input id="csbx-q" class="csbx-input" type="search" spellcheck="false" autocomplete="off"
            placeholder="Search here.." aria-autocomplete="list" aria-controls="csbx-suggest"
            aria-expanded="false" />

        <div id="csbx-suggest" class="csbx-suggest" role="listbox" aria-label="Suggestions"></div>
    </div>
</section>

<style>
    /* ===== Scope + tokens ===== */
    #canstem-course-finder {
        --csbx-ink: #0f172a;
        --csbx-muted: #667085;
        --csbx-bg: #fff;
        --csbx-border: #e6e6e6;
        --csbx-ring: #fbb02547;
        --csbx-ring-soft: rgba(251, 176, 37, .18);
        --csbx-ring-strong: rgba(251, 176, 37, .36);
        --csbx-brand: #001161;
        --csbx-soft: #f8fafc;
        --csbx-shadow: 0 10px 30px rgba(2, 6, 23, .10);
        --csbx-radius: 999px;
        --csbx-h: 52px;
        /* outer shell height */
        --csbx-font: 18px;
        /* input font (16+ avoids iOS zoom) */
        --csbx-menu-radius: 14px;
        --csbx-chip-blue: #eef2ff;
        --csbx-chip-blue-b: #e0e7ff;

        max-width: 1200px;
        margin: 0 auto;
        padding: 0;
    }

    /* Reset (scoped) */
    #canstem-course-finder input,
    #canstem-course-finder button,
    #canstem-course-finder ul,
    #canstem-course-finder li {
        all: unset;
    }

    #canstem-course-finder input,
    #canstem-course-finder button {
        box-shadow: none !important;
        background: none !important;
    }

    /* ===== Shell ===== */
    #canstem-course-finder .csbx-shell {
        position: relative;
        display: flex;
        /* <-- switch to flex to fix vertical clipping */
        align-items: center;
        /* center text/placeholder reliably (Safari too) */
        height: var(--csbx-h);
        background: var(--csbx-bg);
        border: 1px solid var(--csbx-border);
        border-radius: var(--csbx-radius);
        padding: 0 16px 0 44px;
        /* right/left padding (left keeps space for icon) */
        box-shadow: 0 1px 0 rgba(2, 6, 23, .02), 0 8px 24px rgba(2, 6, 23, .06);
        transition: box-shadow .18s ease, border-color .18s ease;
    }

    #canstem-course-finder .csbx-shell:focus-within {
        border-color: lightgrey;
        box-shadow: 0 4px 28px rgba(251, 176, 37, .6), 0 0 0 0 var(--csbx-ring);
    }

    /* Icon */
    #canstem-course-finder .csbx-search {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        color: #9aa5b1;
        pointer-events: none;
    }

    /* ===== Input (Safari-safe) ===== */
    #canstem-course-finder .csbx-input {
        flex: 1 1 auto;
        /* take remaining width */
        min-width: 0;
        /* prevent overflow in flex */
        height: 2.5rem;
        /* inner control height; no clipping */
        line-height: normal;
        /* avoid placeholder clipping on WebKit */
        padding: 0;
        /* the shell handles padding */
        font-size: var(--csbx-font);
        color: var(--csbx-ink) !important;
        caret-color: var(--csbx-ink);
    }

    #canstem-course-finder .csbx-input::placeholder {
        color: #9aa5b1;
        opacity: 1;
        /* ensure visible on Safari */
    }

    /* ===== Suggestions ===== */
    #canstem-course-finder .csbx-suggest {
        position: absolute;
        left: 0;
        right: 0;
        top: calc(100% + 10px);
        background: #fff;
        border: 1px solid var(--csbx-border);
        border-radius: 18px;
        box-shadow: var(--csbx-shadow);
        padding: 8px;
        max-height: 420px;
        overflow: auto;
        z-index: 8;
        display: none;
    }

    #canstem-course-finder .csbx-suggest.csbx-show {
        display: block;
    }

    /* Rows */
    #canstem-course-finder .csbx-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 14px;
        border-radius: 12px;
        cursor: pointer;
        transition: background .12s ease;
    }

    #canstem-course-finder .csbx-row:hover,
    #canstem-course-finder .csbx-row[aria-selected="true"] {
        background: #f7fafc;
    }

    #canstem-course-finder .csbx-left {
        display: flex;
        flex-direction: column;
    }

    #canstem-course-finder .csbx-code {
        font-size: 20px;
        font-weight: 800;
        color: var(--csbx-ink);
    }

    #canstem-course-finder .csbx-name {
        font-size: 14px;
        color: #334155;
        margin-top: 2px;
    }

    #canstem-course-finder .csbx-right {
        display: flex;
        gap: 6px;
        align-items: center;
    }

    #canstem-course-finder .csbx-chip {
        font-size: 12px;
        padding: 4px 10px;
        border-radius: 999px;
        white-space: nowrap;
        border: 1px solid transparent;
    }

    #canstem-course-finder .csbx-chip.course {
        background: #ecfdf5;
        border-color: #a7f3d0;
        color: #065f46;
    }

    #canstem-course-finder .csbx-chip.page {
        background: #eef2ff;
        border-color: #e0e7ff;
        color: #1e3a8a;
    }

    #canstem-course-finder .csbx-chip.blog {
        background: #ecfeff;
        border-color: #a5f3fc;
        color: #0e7490;
    }

    /* ===== Mobile tweaks ===== */
    @media (max-width:640px) {
        #canstem-course-finder .csbx-shell {
            padding-right: 12px;
        }
        #canstem-course-finder .csbx-code {
        font-size: 14px !important;
        font-weight: 700;
        color: var(--csbx-ink);
    }

        /* still â‰¥16 for iOS */
    }
</style>
<!-- ============== /CanSTEM Search ============== -->

<script>
    (function () {
        /* ---------------- COURSES / PRODUCTS (unchanged behaviour) ---------------- */
        // Grade 9
        const D9 = [
            { code: "AVI1O", name: "Visual Arts" }, 
            { code: "ADA1O", name: "Drama" }, 
            // { code: "BEM1O", name: "Building The Entrepreneurial Mindset" },
            { code: "CGC1W", name: "Issues in Canadian Geography (De-Streamed)" }, 
            { code: "ENL1W", name: "English (De-Streamed)" },
            // { code: "EAE1W", name: "English (French OSSD), De-Streamed" },
            // { code: "ENG1L", name: "English (LDCC)" },
            { code: "FSF1D", name: "French (De-Streamed)" },
            // { code: "FSF1O", name: "Core French (Open)" }, 
            { code: "GLS1O", name: "Learning Strategies 1: Skills for Success" },
            // { code: "GLE1O", name: "Learning Strategies 1: Skills for Success" },
            { code: "HFN1O", name: "Food and Nutrition" }, 
            { code: "HIF1O", name: "Exploring Family Studies" }, 
            { code: "PPL1O", name: "Healthy Active Living Education" },
            { code: "MTH1W", name: "Mathematics (De-Streamed)" }, 
            // { code: "MAT1L", name: "Mathematics (LDCC)" }, 
            { code: "SNC1W", name: "Science (De-Streamed)" },
            // { code: "SNC1L", name: "Science (LDCC)" }, 
            { code: "TIJ1O", name: "Exploring Technologies" }, 
            { code: "TAS1O", name: "Technology and the Skilled Trades" },
            // { code: "PPL1O", name: "Healthy Active Living Education (Open)" }
        ];
        // Grade 10
        const D10 = [
            { code: "AVI2O", name: "Visual Arts (G10)" }, 
            { code: "ADA2O", name: "Drama (G10)" }, 
            { code: "ASM2O", name: "Media Arts (G10)" },
            { code: "BEP2O", name: "Launching and Leading a Business (G10)" }, 
            { code: "CHC2D", name: "Canadian History Since WWI (Academic)" },
            { code: "CHC2P", name: "Canadian History Since WWI (Applied)" }, 
            { code: "CHV2O", name: "Civics and Citizenship" }, 
            { code: "ENG2D", name: "English (Academic)" },
            { code: "ENG2P", name: "English (Applied)" }, 
            // { code: "ENG2L", name: "English (LDCC)" }, 
            { code: "EAE2D", name: "English (French OSSD, Academic)" },
            { code: "FSF2D", name: "French (Academic)" }, 
            // { code: "FSF2O", name: "Core French (Open)" }, 
            { code: "FSF2P", name: "Core French (Applied)" },
            { code: "GLC2O", name: "Career Studies" }, 
            { code: "HIF2O", name: "Individual and Family Living" }, 
            { code: "HFN2O", name: "Food and Nutrition" },
            { code: "ICS2O", name: "Introduction to Computer Studies" }, 
            { code: "ICD2O", name: "Digital Technology & Innovations" },
            { code: "MPM2D", name: "Principles of Mathematics (Academic)" }, 
            { code: "MFM2P", name: "Foundations of Mathematics (Applied)" },
            // { code: "MAT2L", name: "Mathematics (LDCC)" }, 
            { code: "PPL2O", name: "Healthy Active Living Education" },
            { code: "SNC2D", name: "Science (Academic)" }, 
            { code: "SNC2P", name: "Science (Applied)" }, 
            // { code: "SNC2L", name: "Science (LDCC)" },
            // { code: "RGJ2O", name: "Communications Technology (G10)" }, 
            { code: "TEJ2O", name: "Computer Technology" },
            { code: "TFJ2O", name: "Hospitality and Tourism" }, 
            { code: "TDJ2O", name: "Technological Design" },
            { code: "TAS2O", name: "Technology and the Skilled Trades" }

             // On wordpress
            // { code: "BBI2O", name: "Introduction to Business" },
            // { code: "EAE2D", name: "English" },
            // { code: "TGJ2O", name: "Communications Technology (G10)" },
        ];
        // Grade 11
        const D11 = [
            { code: "AVI3M", name: "Visual Arts (U/C)" }, 
            { code: "AVI3O", name: "Visual Arts (Open)" }, 
            { code: "ADA3M", name: "Drama (U/C)" },
            { code: "ADA3O", name: "Drama (Open)" }, 
            { code: "ASM3M", name: "Media Arts (U/C)" }, 
            { code: "ASM3O", name: "Media Arts (Open)" },
            { code: "BAF3M", name: "Financial Accounting Fundamentals" }, 
            // { code: "BAI3E", name: "Accounting Essentials (Workplace)" },
            // { code: "BDI3C", name: "Entrepreneurship: The Venture" }, 
            { code: "BDP3O", name: "Entrepreneurship: The Enterprising Person" },
            { code: "BTA3O", name: "ICT: The Digital Environment" }, 
            { code: "BMI3C", name: "Marketing: Goods, Services, Events" },
            { code: "CIE3M", name: "The Individual and the Economy" }, 
            { code: "CGD3M", name: "Regional Geography" }, 
            { code: "CGF3M", name: "Forces of Nature" },
            { code: "CGT3O", name: "Intro to Spatial Technologies (Open)" }, 
            { code: "CGG3O", name: "Travel & Tourism" }, 
            { code: "CHA3U", name: "American History" },
            // { code: "CHW3U", name: "World History to 15th Century" }, 
            { code: "CHT3O", name: "World History since 1900 (Open)" },
            { code: "CLU3M", name: "Understanding Canadian Law" }, 
            { code: "CPC3O", name: "Politics in Action: Making Change" },
            { code: "ENG3C", name: "English (College)" }, 
            { code: "ENG3U", name: "English (University)" }, 
            // { code: "ENG3E", name: "English (Workplace)" },
            { code: "EAE3U", name: "English (French OSSD, University)" }, 
            { code: "EPS3O", name: "Presentation and Speaking Skills" },
            // { code: "EMS3O", name: "Media Studies (Open)" }, 
            { code: "FSF3U", name: "Core French (University)" }, 
            { code: "FSF3O", name: "Core French (Open)" },
            { code: "FEF3U", name: "Extended French (University)" }, 
            { code: "FIF3U", name: "French Immersion (University)" }, 
            { code: "FIF3O", name: "French Immersion (Open)" },
            { code: "GWL3O", name: "Designing Your Future" }, 
            { code: "HSG3M", name: "Gender Studies" }, 
            // { code: "HSE3E", name: "Equity & Social Justice (Workplace)" },
            { code: "HFC3M", name: "Food and Culture" }, 
            { code: "HPW3C", name: "Working with Infants & Young Children" }, 
            { code: "HZB3M", name: "Philosophy: The Big Questions" },
            { code: "HRT3M", name: "World Religions" }, 
            { code: "HPC3O", name: "Raising Healthy Children" },
            { code: "HSP3U", name: "Intro to Anthropology (University)" }, 
            // { code: "HSP3C", name: "Anthro/Psych/Soc (College)" },
            { code: "ICS3C", name: "Intro to Computer Programming (College)" }, 
            { code: "ICS3U", name: "Intro to Computer Science (University)" },
            { code: "IDC3O", name: "Sports & Entertainment Marketing (Open)" }, 
            { code: "MBF3C", name: "Foundations for College Mathematics" },
            { code: "MCF3M", name: "Functions and Applications" }, 
            { code: "MCR3U", name: "Functions" }, 
            // { code: "MEL3E", name: "Math for Work & Everyday Life (Workplace)" },
            { code: "PPL3O", name: "Healthy Active Living Education" }, 
            { code: "PPZ3C", name: "Health for Life" }, 
            { code: "SBI3C", name: "Biology (College)" },
            { code: "SBI3U", name: "Biology (University)" }, 
            { code: "SCH3U", name: "Chemistry (University)" }, 
            { code: "SPH3U", name: "Physics (University)" },
            { code: "SVN3M", name: "Environmental Science (U/C)" }, 
            { code: "SVN3E", name: "Environmental Science (Workplace)" },
            // { code: "TEI3M", name: "Computer Eng. Tech: Interfacing (U/C)" }, 
            // { code: "TEJ3M", name: "Computer Engineering Technology (U/C)" },
            // { code: "TEL3M", name: "Computer Eng. Tech: Electronics (U/C)" }, 
            // { code: "TEN3M", name: "Computer Eng. Tech: Networking (U/C)" },
            // { code: "TET3E", name: "Computer Technology: IT Support" }, 
            // { code: "TEW3E", name: "Computer Technology: Network Support" },
            { code: "TGJ3M", name: "Communications Technology (U/C)" }, 
            // { code: "TFE3E", name: "Hospitality & Tourism: Event Planning (W)" },
            // { code: "TFJ3E", name: "Hospitality & Tourism (Workplace)" }, 
            // { code: "TFJC", name: "Hospitality & Tourism (College)" },
            { code: "TDJ3M", name: "Technological Design (U/C)" }, 
            { code: "TGJ3O", name: "Communications Tech: Broadcast/Print" },
            { code: "TDJ3O", name: "Technological Design and the Environment" }, 
            // { code: "TGI3M", name: "Interactive New Media & Animation (U/C)" },
            // { code: "TGP3M", name: "Photography & Digital Imaging (U/C)" }, 
            // { code: "TPD3M", name: "Health Care: Dental Services (U/C)" },
            // { code: "TPL3M", name: "Health Care: Laboratory Services (U/C)" }, 
            // { code: "TPM3M", name: "Health Care: Nursing/Medical Services (U/C)" },
            // { code: "TPP3M", name: "Health Services: Pharmacy (U/C)" }, 
            // { code: "TPT3M", name: "Health Care: Therapy Services (U/C)" },
            // { code: "TPJ3C", name: "Health Care (College)" }, 
            // { code: "TPJ3M", name: "Health Care (U/C)" }

            // On wordpress
            // { code: "TGJ3M", name: "Communications Technology" }, 

        ];
        // Grade 12
        const D12 = [
            { code: "ADA4E", name: "Drama (Workplace)" }, 
            { code: "ADA4M", name: "Drama (U/C)" }, 
            { code: "AEA4O", name: "Exploring & Creating in the Arts" },
            // { code: "ASM4M", name: "Media Arts (U/C)" }, 
            { code: "ASM4E", name: "Media Arts (Workplace)" }, 
            { code: "AVI4M", name: "Visual Arts (U/C)" },
            { code: "BAT4M", name: "Financial Accounting Principles" }, 
            { code: "BDV4C", name: "Entrepreneurship: Venture Planning (C)" },
            { code: "BTX4C", name: "ICT: Multimedia Solutions (C)" }, 
            { code: "BBB4M", name: "International Business Fundamentals" }, 
            { code: "BOH4M", name: "Business Leadership" },
            { code: "CIA4U", name: "Analysing Current Economic Issues" }, 
            { code: "CGW4U", name: "World Issues (University)" }, 
            { code: "CGW4C", name: "World Issues (College)" },
            { code: "CGR4M", name: "Environment & Resource Management" }, 
            { code: "CGO4M", name: "Spatial Technologies in Action" }, 
            { code: "CGU4M", name: "World Geography: Urban Patterns" },
            { code: "CHY4U", name: "World History since 15th Century (U)" }, 
            { code: "CHY4C", name: "World History since 15th Century (C)" }, 
            { code: "CHI4U", name: "Canada: History, Identity & Culture" },
            { code: "CLN4U", name: "Canadian & International Law (U)" }, 
            { code: "CLN4C", name: "Legal Studies (College)" }, 
            { code: "CPW4U", name: "Canadian & International Politics" },
            { code: "ENG4U", name: "English (University)" }, 
            { code: "ENG4C", name: "English (College)" }, 
            // { code: "ENG4E", name: "English (Workplace)" },
            { code: "EAE4U", name: "English (French OSSD, University)" }, 
            { code: "EWC4U", name: "The Writerâ€™s Craft (University)" }, 
            { code: "EWC4C", name: "The Writerâ€™s Craft (College)" },
            { code: "FSF4U", name: "Core French (University)" }, 
            { code: "FSF4O", name: "Core French (Open)" }, 
            { code: "HSE4M", name: "Equity & Social Justice" },
            { code: "HSC4M", name: "World Cultures" }, 
            { code: "HFA4U", name: "Nutrition & Health (University)" }, 
            { code: "HFA4C", name: "Nutrition & Health (College)" },
            { code: "HHS4U", name: "Families in Canada (University)" }, 
            { code: "HHS4C", name: "Families in Canada (College)" }, 
            { code: "HHG4M", name: "Human Development Through the Life Span" },
            { code: "HIP4O", name: "Personal Life Management" }, 
            { code: "HPD4C", name: "Working with School-Age Children & Adolescents" }, { code: "HSB4U", name: "Challenge & Change in Society" },
            { code: "HZT4U", name: "Philosophy: Questions & Theories" }, 
            { code: "ICS4U", name: "Computer Science (University)" }, 
            { code: "ICS4C", name: "Computer Programming (College)" },
            { code: "IDC4U", name: "Sports & Entertainment Marketing (U)" }, 
            { code: "IDC4O", name: "Sports & Entertainment Marketing (Open)" },
            { code: "MHF4U", name: "Advanced Functions" }, 
            { code: "MCV4U", name: "Calculus and Vectors" }, 
            { code: "MDM4U", name: "Mathematics of Data Management" },
            { code: "MCT4C", name: "Mathematics for College Technology" }, 
            { code: "MAP4C", name: "Foundations for College Mathematics" }, 
            // { code: "MEL4E", name: "Math for Work & Everyday Life (Workplace)" },
            { code: "OLC4O", name: "Ontario Secondary School Literacy Course" }, 
            { code: "PPL4O", name: "Healthy Active Living Education" }, 
            { code: "PLF4M", name: "Recreation & Healthy Active Living Leadership" },
            { code: "PSK4U", name: "Introductory Kinesiology" }, 
            { code: "SBI4U", name: "Biology (University)" }, 
            { code: "SCH4C", name: "Chemistry (College)" }, 
            { code: "SCH4U", name: "Chemistry (University)" },
            { code: "SPH4U", name: "Physics (University)" }, 
            { code: "SPH4C", name: "Physics (College)" }, 
            { code: "SES4U", name: "Earth and Space Science" }, 
            { code: "SNC4M", name: "Science (U/C)" }, 
            { code: "SNC4E", name: "Science (Workplace)" },
            { code: "TGJ4M", name: "Communications Technology (U/C)" }, 
            { code: "TGJ4O", name: "Communications Tech: Digital Imagery & Web" },
            { code: "TEJ4M", name: "Computer Engineering Technology (U/C)" }, 
            { code: "TFJ4E", name: "Hospitality & Tourism (Workplace)" }, 
            { code: "TFJ4C", name: "Hospitality & Tourism (College)" },
            { code: "TDJ4M", name: "Technological Design (U/C)" }, 
            { code: "TDJ4O", name: "Technological Design in the 21st Century" },
            // { code: "TEI4M", name: "Computer Eng. Tech: Interfacing (U/C)" }, 
            // { code: "TEN4M", name: "Computer Eng. Tech: Networking" }, 
            // { code: "TET4E", name: "Computer Technology: IT Support" },
            // { code: "TEW4E", name: "Computer Technology: Network Support" }, 
            // { code: "TGI4M", name: "Interactive New Media & Animation" }, 
            // { code: "TGP4M", name: "Photography & Digital Imaging" },
            // { code: "TOC4C", name: "Child Development" }, 
            // { code: "TOG4C", name: "Gerontology" }, 
            // { code: "TPD4M", name: "Health Care: Dental Services" },
            // { code: "TPL4M", name: "Health Care: Laboratory Services" }, 
            // { code: "TPM4M", name: "Health Care: Nursing/Medical Services" },
            // { code: "TPP4M", name: "Health Services: Pharmacy" }, 
            // { code: "TPT4M", name: "Health Care: Therapy Services" },
            // { code: "TPJ4C", name: "Health Care (College)" }, 
            // { code: "TPJ4E", name: "Health Care (Workplace)" }, 
            { code: "TPJ4M", name: "Health Care (U/C)" }
            // On wordpress
            // { code: "FIF4U", name: "French Immersion (University)" }, 
            // { code: "HSB4U", name: "Challenge and Change in Society (University)" }, 
        ];
        // ESL/ELD
        const DESL = [
            { code: "ESLAO", name: "ESL Level 1" }, 
            { code: "ESLBO", name: "ESL Level 2" }, 
            { code: "ESLCO", name: "ESL Level 3" }, 
            { code: "ESLDO", name: "ESL Level 4" }, 
            { code: "ESLEO", name: "ESL Level 5" },
            { code: "ELDAO", name: "ELD Level 1" }, 
            { code: "ELDBO", name: "ELD Level 2" }, 
            { code: "ELDCO", name: "ELD Level 3" }, 
            { code: "ELDDO", name: "ELD Level 4" }, 
            { code: "ELDEO", name: "ELD Level 5" }
        ];

        const ALL_COURSES = [...D9, ...D10, ...D11, ...D12, ...DESL]; // no "NONE" entries
        const POPULAR = new Set(["MHF4U", "BBB4M", "MCV4U", "OLC4O", "MAP4C", "SBI4U", "SPH4U", "SCH4U", "SCH4C", "ENG4U", "ENG4C", "MDM4U", "SBI3C", "SBI3U", "SPH3U", "SCH3U", "ENG3U", "HHS4U", "TEJ4M", "TDJ4O", "TFJ4C", "HHG4M", "PPL4O", "SNC4M", "CLN4U", "FIF4U", "CGW4M", "BOH4M", "AVI4M", "HFA4U"]);
        const PRODUCT_BASE = "https://canstemeducation.com/product/";
        const productURL = code => PRODUCT_BASE + String(code || "").toLowerCase() + "/";

        /* ---------------- FULL SITE INDEX (Pages + Blogs) ---------------- */
        const SITE_ITEMS = [
            /* PAGES (83) */
            { title: "About Us", url: "/about-2/", category: "Page", keywords: ["about canstem", "school info", "contact team"] },
            { title: "Accessibility", url: "/accessibility/", category: "Page", keywords: ["aoda", "access", "inclusive"] },
            { title: "Adult learning: Ontario high school diploma", url: "/adult-education/", category: "Page", keywords: ["adult", "ossd", "ged", "mature student"] },
            { title: "Attendance Policy", url: "/attendance-policy/", category: "Page", keywords: ["policy", "attendance", "absent", "late"] },
            { title: "Canadian Adult Education Credential CAEC-GED Canada", url: "/caec/", category: "Page", keywords: ["caec", "ged", "adult credential"] },
            { title: "Career", url: "/career/", category: "Page", keywords: ["jobs", "hiring", "careers"] },
            { title: "CELPIP", url: "/celpip/", category: "Page", keywords: ["english test", "celpip coaching"] },
            { title: "Cheating and Plagiarism", url: "/cheating-and-plagiarism/", category: "Page", keywords: ["academic integrity", "plagiarism policy"] },
            { title: "Code of Conduct", url: "/code-of-conduct/", category: "Page", keywords: ["rules", "behavior", "conduct"] },
            { title: "Competitive Exam Prep", url: "/competitive-exam-prep/", category: "Page", keywords: ["sat", "gre", "ielts", "pte", "prep"] },
            { title: "Computer Usage Policy", url: "/computer-usage-policy/", category: "Page", keywords: ["technology policy", "device", "acceptable use"] },
            { title: "Contact Us", url: "/contact-us/", category: "Page", keywords: ["contact", "email", "phone"] },
            { title: "Course Coding System", url: "/course-coding-system/", category: "Page", keywords: ["course code", "mhf4u", "mcv4u", "mapping"] },
            { title: "Course/Mode Change Terms & Policy", url: "/course-mode-change-terms-policy/", category: "Page", keywords: ["mode change", "online", "in-class", "terms"] },
            { title: "Examination Policy", url: "/examination-policy/", category: "Page", keywords: ["exam", "tests", "rules"] },
            { title: "FAQ â€“ Frequently Asked Questions", url: "/faq/", category: "Page", keywords: ["faq", "help", "answers"] },
            { title: "Fee Structure 2025â€“26", url: "/fee-structure/", category: "Page", keywords: ["fees", "tuition", "price"] },
            { title: "Final Exam and Report Card Information", url: "/final-exam-and-report-card-information/", category: "Page", keywords: ["final exam", "report card", "transcript"] },
            { title: "Full-Time School in Canada (Grades 1â€“12)", url: "/full-time-school/", category: "Page", keywords: ["full time", "in-class", "private school"] },
            { title: "Gallery", url: "/gallery/", category: "Page", keywords: ["photos", "campus", "events"] },
            { title: "High School Credits", url: "/high-school-credits/", category: "Page", keywords: ["credit courses", "grade 9-12", "online", "in-class"] },
            { title: "High School for Healthcare", url: "/healthcare-programs/", category: "Page", keywords: ["nursing prerequisites", "healthcare"] },
            { title: "Holiday and Special Hours", url: "/holiday-and-special-hours/", category: "Page", keywords: ["holiday", "hours", "schedule"] },
            { title: "Home", url: "/", category: "Page", keywords: ["home", "main"] },
            { title: "IELTS â€“ International English Language Testing System", url: "/ielts/", category: "Page", keywords: ["ielts test", "coaching", "prep"] },
            { title: "In-Class Student Instructions", url: "/in-class-student-instructions/", category: "Page", keywords: ["instructions", "in-class", "students"] },
            { title: "International Students", url: "/international-student/", category: "Page", keywords: ["study permit", "visa", "international"] },
            { title: "Late and Missed Assignments Policy", url: "/late-and-missed-assignments-policy/", category: "Page", keywords: ["late policy", "missed work"] },
            { title: "Live Links", url: "/live-links/", category: "Page", keywords: ["links", "resources"] },
            { title: "My Cart", url: "/cart/", category: "Page", keywords: ["cart", "checkout"] },
            { title: "Online High School", url: "/online-high-school/", category: "Page", keywords: ["online credits", "virtual school"] },
            { title: "Online Student Instructions", url: "/online-student-instructions/", category: "Page", keywords: ["online", "how to", "start"] },
            { title: "Ontario High School Literacy", url: "/ontario-high-school-literacy/", category: "Page", keywords: ["olc4o", "osslt", "literacy"] },
            { title: "Our Blog", url: "/our-blog/", category: "Page", keywords: ["blog", "articles"] },
            { title: "Our Blogs â€“ CanSTEM", url: "/our-blogs-canstem/", category: "Page", keywords: ["blog index"] },
            { title: "Payment", url: "/payment/", category: "Page", keywords: ["fees", "payment"] },
            { title: "Policies", url: "/policies/", category: "Page", keywords: ["policies", "rules"] },
            { title: "Privacy Policy", url: "/privacy-policy/", category: "Page", keywords: ["privacy", "policy"] },
            { title: "Promotions", url: "/promo/", category: "Page", keywords: ["promo", "offers"] },
            { title: "PTE English Language Tests | Pearson PTE", url: "/pte/", category: "Page", keywords: ["pte", "pearson", "english test"] },
            { title: "Rating & Reviews", url: "/google-reviews/", category: "Page", keywords: ["reviews", "testimonials", "google"] },
            { title: "Refer a Friend", url: "/refer-a-friend/", category: "Page", keywords: ["referral", "friend"] },
            { title: "Registration", url: "/registration/", category: "Page", keywords: ["register", "enroll", "admission"] },
            { title: "Registration Forms", url: "/registration-forms/", category: "Page", keywords: ["forms", "registration"] },
            { title: "Safe School Policy", url: "/safe-school-policy/", category: "Page", keywords: ["safe school", "safety", "policy"] },
            { title: "School Policies, Practices, and Proceduresâ€‹", url: "/school-policies-practices-and-procedures/", category: "Page", keywords: ["school policies", "procedure"] },
            { title: "Student Support", url: "/student-services/", category: "Page", keywords: ["student services", "student support", "student help", "support", "help"] },
            { title: "OCAS Information and Updates", url: "/ocas/", category: "Page", keywords: ["ocas", "college applications", "ocas help", "ocas guidance"] },
            { title: "Ontario Secondary School Diploma (OSSD Requirements)", url: "/ossd/", category: "Page", keywords: ["ossd", "diploma", "requirements", "ossd support", "diploma help", "ossd help", "ossd guidance"] },
            { title: "OUAC Guidance â€“ 2025â€“2026 Schedule of Dates", url: "/ouac/", category: "Page", keywords: ["ouac dates", "schedule", "ouac support", "student ouac steps", "ouac help", "ouac guidance"] },
            { title: "How-to Videos | Ontario Universitiesâ€™ Application â€¦", url: "/how-to-videos/", category: "Page", keywords: ["video", "how to", "ouac"] },
            { title: "Sitemap", url: "/sitemap/", category: "Page", keywords: ["sitemap", "pages"] },
            { title: "STEM Programs", url: "/stem-programs/", category: "Page", keywords: ["stem", "programs", "science tech"] },
            { title: "Student Achievement The Assessment and Evaluation Policy", url: "/student-achievement-the-assessment-and-evaluation-policy/", category: "Page", keywords: ["assessment", "evaluation", "policy"] },
            { title: "Summer Camp", url: "/summer-camp/", category: "Page", keywords: ["camp", "summer"] },
            { title: "Summer School", url: "/summer-school/", category: "Page", keywords: ["summer school", "credits"] },
            { title: "TCF & TEF â€“ Canada", url: "/tcf-and-tef/", category: "Page", keywords: ["tcf", "tef", "french test"] },
            { title: "Terms & Conditions", url: "/terms-and-conditions/", category: "Page", keywords: ["terms", "conditions"] },
            { title: "Tutoring Services & Fees (Grades 1â€“12, IB, ESL, Test Prep, College)", url: "/tutoring/", category: "Page", keywords: ["tutoring", "fees", "1-12", "ib", "esl", "test prep"] },
            { title: "University Open House", url: "/university-open-house/", category: "Page", keywords: ["open house", "university"] },

            /* BLOGS (60) */
            { title: "7 Easy Steps to a Successful Result", url: "/7-easy-steps-to-a-successful-result/", category: "Blog", keywords: ["steps", "success guide"] },
            { title: "Adult Learners Perspective on the Shift from GED Testing", url: "/adult-learners-perspective-on-the-shift-from-ged-testing/", category: "Blog", keywords: ["adult", "ged", "caec"] },
            { title: "All-Inclusive Manual for Finishing the OUAC Application", url: "/all-inclusive-manual-for-finishing-the-ouac-application/", category: "Blog", keywords: ["ouac", "manual", "apply"] },
            { title: "Applying through the OUAC website", url: "/applying-through-the-ouac-website/", category: "Blog", keywords: ["ouac", "apply", "tutorial"] },
            { title: "Bramptonâ€™s Best High Schools", url: "/bramptons-best-high-schools/", category: "Blog", keywords: ["brampton", "high schools", "best"] },
            { title: "Building a Successful Study Plan", url: "/building-a-successful-study-plan/", category: "Blog", keywords: ["study plan", "tips"] },
            { title: "CanSTEM Education Private School Middle School Program Overview", url: "/canstem-education-private-school-middle-school-program-overview/", category: "Blog", keywords: ["middle school", "overview"] },
            { title: "Exploring Modern Work Realities", url: "/exploring-modern-work-realities/", category: "Blog", keywords: ["work realities", "future of work"] },
            { title: "Exploring Possible Post-Secondary Careers", url: "/exploring-possible-post-secondary-careers/", category: "Blog", keywords: ["careers", "post-secondary"] },
            { title: "Forward-Looking Summer Courses in 2024", url: "/forward-looking-summer-courses-in-2024/", category: "Blog", keywords: ["summer courses", "2024"] },
            { title: "Handling the OSSDâ€™s Requirements", url: "/handling-the-ossds-requirements/", category: "Blog", keywords: ["ossd requirements", "diploma"] },
            { title: "How to Achieve Academic Success in High School", url: "/how-to-achieve-academic-success-in-high-school/", category: "Blog", keywords: ["success", "study"] },
            { title: "Making a Successful Exam Study Plan", url: "/making-a-successful-exam-study-plan/", category: "Blog", keywords: ["exam plan", "study"] },
            { title: "Manual for Post-Secondary Education", url: "/manual-for-post-secondary-education/", category: "Blog", keywords: ["post-secondary", "manual"] },
            { title: "Mississauga Night Schools: Unlock Your Potential", url: "/mississauga-night-schools-unlock-your-potential/", category: "Blog", keywords: ["night school", "mississauga"] },
            { title: "Online Studentsâ€™ Guide to Back-to-School in 2024", url: "/online-students-guide-to-back-to-school-in-2024/", category: "Blog", keywords: ["online", "back to school"] },
            { title: "Ontario Students 2024 Graduation Requirements", url: "/ontario-students-2024-graduation-requirements/", category: "Blog", keywords: ["ossd", "grad requirements"] },
            { title: "Ontario Updates Secondary School Graduation Standards", url: "/ontario-updates-secondary-school-graduation-standards/", category: "Blog", keywords: ["graduation standards", "update"] },
            { title: "Ontarioâ€™s grad requirements with tech credits and online access", url: "/ontarios-grad-requirements-with-tech-credits-and-online-access/", category: "Blog", keywords: ["tech credits", "requirements"] },
            { title: "OUAC & OCAS Applications", url: "/ouac-ocas-applications/", category: "Blog", keywords: ["ouac", "ocas", "applications"] },
            { title: "OUAC Program for Students in Ontario", url: "/ouac-program-for-students-in-ontario/", category: "Blog", keywords: ["ouac program", "dates"] },
            { title: "Planning for Summer 2024 College and University Admission", url: "/planning-for-summer-2024-college-and-university-admission/", category: "Blog", keywords: ["summer 2024", "admission planning"] },
            { title: "The Ultimate Guide to Tutoring and Language Coaching in Mississauga & Brampton", url: "/tutoring-language-coaching-mississauga-brampton/", category: "Blog", keywords: ["tutoring", "language coaching", "brampton"] },
            { title: "Private School vs Public School in Ontario: Which is Better for Your Childâ€™s Future?", url: "/private-vs-public-school-ontario/", category: "Blog", keywords: ["private vs public", "comparison"] },
            { title: "Enrollment Now Open for Full-Time School 2025â€“26 in Ontario â€” Grades 1 to 12 at CanSTEM Education", url: "/enrollment-open-full-time-school-ontario-2025-26/", category: "Blog", keywords: ["enrollment", "2025", "full time"] },
            { title: "OSSD Requirements 2025: Your Complete Guide to Ontario Secondary School Diploma Success", url: "/ossd-requirements-2025/", category: "Blog", keywords: ["ossd", "2025", "guide"] },
            { title: "Why CanSTEM? The Private School in Brampton That Puts Students First", url: "/why-canstem/", category: "Blog", keywords: ["why canstem", "brampton"] },
            { title: "Summer Camp 2025 at CanSTEM", url: "/summer-camp-2025-at-canstem/", category: "Blog", keywords: ["camp 2025", "summer"] },
            { title: "Summer School 2025 at CanSTEM", url: "/summer-school-2025-at-canstem/", category: "Blog", keywords: ["summer school 2025", "credits"] },
            { title: "Best Coaching for PTE, IELTS, CELPIP & CAEL in Canada", url: "/english-test-coaching-canada/", category: "Blog", keywords: ["pte", "ielts", "celpip", "cael"] },
            { title: "The Role of AI in Modern Education", url: "/the-role-of-ai-in-modern-education/", category: "Blog", keywords: ["ai", "education"] },
            { title: "The Role of Parents and Families in Online Schooling", url: "/the-role-of-parents-and-families-in-online-schooling/", category: "Blog", keywords: ["parents", "online schooling"] },
            { title: "2024 High School Graduation Requirements", url: "/2024-high-school-graduation-requirements/", category: "Blog", keywords: ["graduation", "2024", "requirements"] },
            { title: "CanSTEM Education Private School", url: "/canstem-education-private-school-3/", category: "Blog", keywords: ["canstem", "overview"] },
            { title: "The Benefits of One on One Tutoring Services", url: "/the-benefits-of-one-on-one-tutoring-services/", category: "Blog", keywords: ["tutoring", "benefits"] },
            { title: "The Value of Private School Education", url: "/the-value-of-private-school-education/", category: "Blog", keywords: ["private school", "value"] },
            { title: "Dual Enrollment Explained â€“ College and High School Credits", url: "/dual-enrollment-explained-college-and-high-school-credits/", category: "Blog", keywords: ["dual enrollment", "college credit"] },
            { title: "5 Things To Consider Before Changing Schools For Your Child", url: "/5-things-to-consider-before-changing-schools-for-your-child/", category: "Blog", keywords: ["changing schools", "guide"] },
            { title: "5 Benefits of Earning College Credit in High School", url: "/5-benefits-of-earning-college-credit-in-high-school/", category: "Blog", keywords: ["college credit", "benefits"] },
            { title: "How Raising Pets Can Help Children Develop Emotional Intelligence", url: "/raising-pets-can-help-children-develop-emotional-intelligence/", category: "Blog", keywords: ["pets", "emotional intelligence"] },
            { title: "5 Ways A Tutor Can Help Students With Exceptionalities", url: "/5-ways-a-tutor-can-help-students-with-exceptionalities/", category: "Blog", keywords: ["tutor", "exceptionalities"] },
            { title: "The Best Way to Balance Study and Fun over the Holidays", url: "/the-best-way-to-balance-study-and-fun-over-the-holidays/", category: "Blog", keywords: ["holidays", "balance", "study"] },
            { title: "How to Stop Your Child from Hating School", url: "/how-to-stop-your-child-from-hating-school/", category: "Blog", keywords: ["motivation", "school dislike"] },
            { title: "Perspectives on Screen Time in a Pandemic", url: "/perspectives-on-screen-time-in-a-pandemic/", category: "Blog", keywords: ["screen time", "pandemic"] },
            { title: "What to Wear to a Private School Parent Interview", url: "/what-to-wear-to-a-private-school-parent-interview/", category: "Blog", keywords: ["interview", "parent", "dress"] },
            { title: "Four Steps to Selecting a School for Your Child", url: "/four-steps-to-selecting-a-school-for-your-child/", category: "Blog", keywords: ["selecting school", "steps"] },
            { title: "Tips To Choose A Tutor", url: "/tips-to-choose-a-tutor/", category: "Blog", keywords: ["choose tutor", "tips"] },
            { title: "Tips for Starting High School", url: "/tips-for-starting-high-school/", category: "Blog", keywords: ["starting high school", "advice"] },
            { title: "Boost Grades and Achieve Academic Excellence", url: "/boost-grades-and-achieve-academic-excellence/", category: "Blog", keywords: ["grades", "excellence"] },
            { title: "University Scholarship Applications for 2024â€“2025", url: "/university-scholarship-applications-for-2024-2025/", category: "Blog", keywords: ["scholarship", "2024", "2025"] },
            { title: "The Importance of Early Preparation for University", url: "/the-importance-of-early-preparation-for-university/", category: "Blog", keywords: ["university prep", "early"] },
            { title: "Empowering Mature Students", url: "/empowering-mature-students/", category: "Blog", keywords: ["mature students", "adult"] },
            { title: "Nursing Prerequisite Courses at CanSTEM Education", url: "/nursing-prerequisite-courses-at-canstem-education/", category: "Blog", keywords: ["nursing pre-req", "healthcare"] },
            { title: "Online Learning at CanSTEM: Study Anytime, Anywhere", url: "/online-learning-at-canstem/", category: "Blog", keywords: ["online learning", "anytime"] },
            { title: "Why November 11 Matters: Remembrance Day in Canada", url: "/remembrance-day-in-canada/", category: "Blog", keywords: ["remembrance day", "nov 11"] },
            { title: "Impact of IRCC Closing the Student Direct Stream", url: "/impact-of-ircc-closing-the-student-direct-stream/", category: "Blog", keywords: ["ircc", "sds", "international"] },
            { title: "How Raising Pets Can Help Children Develop Emotional Intelligence (duplicate entry)", url: "/how-raising-pets-can-help-children-develop-emotional-intelligence/", category: "Blog", keywords: ["pets", "emotion"] },
            { title: "Navigating COVID", url: "/navigating-covid/", category: "Blog", keywords: ["covid", "navigation"] },
            { title: "How Private Schools Influence Academic Success and Lifelong Outcomes", url: "/academic-success-and-lifelong-outcomes/", category: "Blog", keywords: ["private school", "success", "lifelong"] }
        ];

        /* ---------------- Search helpers ---------------- */
        const toCourseItem = c => ({
            kind: "course",
            title: c.code + " â€” " + c.name,
            code: c.code,
            name: c.name,
            url: productURL(c.code),
            chip: "Course",
            chipClass: "course",
            haystack: (c.code + " " + c.name).toLowerCase(),
            popular: POPULAR.has(c.code)
        });

        const toSiteItem = p => ({
            kind: "content",
            title: p.title,
            code: p.title,
            name: (new URL(p.url, location.origin)).pathname.replace(/\/$/, "") || "/",
            url: p.url,
            chip: p.category,
            chipClass: p.category === "Blog" ? "blog" : "page",
            haystack: (p.title + " " + (p.keywords || []).join(" ")).toLowerCase()
        });

        const COURSE_ITEMS = ALL_COURSES.map(toCourseItem);
        const SITE_INDEX_ITEMS = SITE_ITEMS.map(toSiteItem);

        function searchAll(q) {
            const t = q.trim().toLowerCase();
            if (!t) return [];
            const out = [];

            // Courses: rank by code prefix > code contains > name contains
            for (const it of COURSE_ITEMS) {
                const code = it.code.toLowerCase(), name = it.name.toLowerCase();
                let score = null;
                if (code.startsWith(t)) score = 0;
                else if (code.includes(t)) score = 1;
                else if (name.includes(t)) score = 2;
                if (score !== null) out.push({ ...it, score });
            }

            // Pages/Blogs: title prefix > title contains > keywords contains
            for (const it of SITE_INDEX_ITEMS) {
                const title = it.title.toLowerCase();
                const hay = it.haystack;
                let score = null;
                if (title.startsWith(t)) score = 0.5;
                else if (title.includes(t)) score = 1.5;
                else if (hay.includes(t)) score = 2.5;
                if (score !== null) out.push({ ...it, score });
            }

            // Sort: score asc; tie-breaker prefer courses; then alphabetical
            out.sort((a, b) => {
                if (a.score !== b.score) return a.score - b.score;
                if (a.kind !== b.kind) return a.kind === "course" ? -1 : 1;
                return (a.title || "").localeCompare(b.title || "");
            });

            return out.slice(0, 30);
        }

        /* ---------------- UI wiring ---------------- */
        const input = document.querySelector("#csbx-q");
        const suggest = document.querySelector("#csbx-suggest");

        function setOpen(on) {
            input.setAttribute("aria-expanded", on ? "true" : "false");
            suggest.classList.toggle("csbx-show", on);
        }

        function render() {
            const results = searchAll(input.value);
            suggest.innerHTML = "";
            if (!results.length) { setOpen(false); return; }

            results.forEach((it, idx) => {
                const row = document.createElement("div");
                row.className = "csbx-row"; row.id = "csbx-opt-" + idx; row.role = "option"; row.setAttribute("aria-selected", "false");

                row.innerHTML = `
        <div class="csbx-left">
          <span class="csbx-code">${it.title}</span>
          <span class="csbx-name">${it.kind === "course" ? it.name : it.name}</span>
        </div>
        <div class="csbx-right">
          <span class="csbx-chip ${it.chipClass}">${it.chip}</span>
          ${it.popular ? '<span class="csbx-chip course">Popular</span>' : ''}
        </div>
      `;
                row.addEventListener("mousedown", e => e.preventDefault());
                row.addEventListener("click", () => location.href = it.url);
                suggest.appendChild(row);
            });

            activeIndex = -1;
            setOpen(true);
        }

        let activeIndex = -1;
        input.addEventListener("input", render);
        input.addEventListener("focus", () => { if (input.value.trim()) render(); });
        input.addEventListener("blur", () => setTimeout(() => setOpen(false), 140));

        input.addEventListener("keydown", e => {
            const items = [...suggest.querySelectorAll(".csbx-row")];
            if (!items.length) {
                if (e.key === "Enter" && input.value.trim()) {
                    // fallback: try course URL by code
                    e.preventDefault(); location.href = productURL(input.value.trim().toUpperCase());
                }
                return;
            }
            if (e.key === "ArrowDown") { e.preventDefault(); activeIndex = Math.min(activeIndex + 1, items.length - 1); }
            else if (e.key === "ArrowUp") { e.preventDefault(); activeIndex = Math.max(activeIndex - 1, 0); }
            else if (e.key === "Enter") {
                e.preventDefault(); (items[activeIndex] || items[0])?.click();
            } else if (e.key === "Escape") { setOpen(false); return; } else return;

            items.forEach(n => n.setAttribute("aria-selected", "false"));
            if (activeIndex >= 0 && items[activeIndex]) {
                items[activeIndex].setAttribute("aria-selected", "true");
                items[activeIndex].scrollIntoView({ block: "nearest" });
            }
        });
    })();
</script>
<!-- ============== /CanSTEM Search ============== -->